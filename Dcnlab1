import java.util.Scanner;

public class prog1
{

public static void main(String args[])
{



Scanner s = new Scanner(System.in);
int n;

System.out.println("Enter the size of the data");
n = s.nextInt();

int data[] = new int[n];
System.out.println("Enter the data bit by bit");
for (int i = 0; i < n; i++)
{
 data[i] = s.nextInt();
}

System.out.println("Enter the size of the divisor");
n = s.nextInt();

int divisor[] = new int[n];
System.out.println("Enter the divisor bit by bit");
for (int i = 0; i < n; i++)
{
divisor[i] = s.nextInt();
}

int remainder[] = divide(data, divisor);

System.out.println("\nThe code generated is");
for (int i = 0; i < data.length; i++)
{
System.out.println(data[i]);
}

for (int i = 0; i < remainder.length - 1; i++)
{
            System.out.println(remainder[i]);
        }

        int sent_data[] = new int[data.length + remainder.length - 1];

        System.out.println("Enter the data to be sent");
        for (int i = 0; i < sent_data.length; i++)
        {
            sent_data[i] = s.nextInt();
        }

        receive(sent_data, divisor);
    }

    static int[] divide(int old_data[], int divisor[])
    {
        int old_length = old_data.length;
        int[] data = new int[old_length + divisor.length - 1];
        System.arraycopy(old_data, 0, data, 0, old_length);

        System.out.println("Message bit after appending divisor length-1 0's");
        for (int i = 0; i < data.length; i++)
        {
            System.out.print(data[i] + " ");
        }
        System.out.println();

        int remainder[] = new int[divisor.length];
        System.arraycopy(data, 0, remainder, 0, divisor.length);

        for (int i = 0; i < old_length; i++)
        {
            if (remainder[0] == 1)
            {
                for (int j = 1; j < divisor.length; j++)
                {
                    remainder[j - 1] = exor(remainder[j], divisor[j]);
                }
            }
            else
            {
                for (int j = 1; j < divisor.length; j++)
                {
                    remainder[j - 1] = remainder[j];
                }
            }
            if (i + divisor.length < data.length)
            {
                remainder[divisor.length - 1] = data[i + divisor.length];
            }
        }
        return remainder;
    }

    static int exor(int a, int b)
    {
        if (a == b)
            return 0;
        return 1;
    }

    static void receive(int data[], int divisor[])
    {
        int remainder[] = divide(data, divisor);
        for (int i = 0; i < remainder.length; i++)
        {
            if (remainder[i] != 0)
            {
                System.out.println("There is an error in received data");
                return;
            }
        }
        System.out.println("Data was received without any error");
    }
}
